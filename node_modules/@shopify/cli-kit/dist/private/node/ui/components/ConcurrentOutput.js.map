{"version":3,"file":"ConcurrentOutput.js","sourceRoot":"","sources":["../../../../../src/private/node/ui/components/ConcurrentOutput.tsx"],"names":[],"mappings":"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","sourcesContent":["import {OutputProcess} from '../../../../public/node/output.js'\nimport {AbortController} from '../../../../public/node/abort.js'\nimport {treeKill} from '../../../../public/node/tree-kill.js'\nimport {handleCtrlC} from '../../ui.js'\nimport {addOrUpdateConcurrentUIEventOutput} from '../../demo-recorder.js'\nimport useAbortSignal from '../hooks/use-abort-signal.js'\nimport React, {FunctionComponent, useCallback, useEffect, useMemo, useState} from 'react'\nimport {Box, Key, Static, Text, useInput, TextProps, useStdin, useApp} from 'ink'\nimport stripAnsi from 'strip-ansi'\nimport figures from 'figures'\nimport {Writable} from 'stream'\n\nexport type WritableStream = (process: OutputProcess, index: number) => Writable\n\nexport interface Footer {\n  shortcuts: Shortcut[]\n  subTitle?: string\n}\n\nexport interface FooterContext {\n  footer?: Footer\n  updateShortcut: (prevShortcut: Shortcut, newShortcut: Shortcut) => void\n  updateSubTitle: (subTitle: string) => void\n}\n\ninterface Shortcut {\n  key: string\n  action: string\n  syncer?: (footerContext: FooterContext, abortController: AbortController) => void\n  state?: {\n    [key: string]: unknown\n  }\n}\nexport interface ConcurrentOutputProps {\n  processes: OutputProcess[]\n  abortController: AbortController\n  showTimestamps?: boolean\n  onInput?: (input: string, key: Key, exit: () => void) => void\n  onInputAsync?: (input: string, key: Key, exit: () => void, footerContext: FooterContext) => Promise<void>\n  footer?: Footer\n  // If set, the component is not automatically unmounted once the processes have all finished\n  keepRunningAfterProcessesResolve?: boolean\n}\ninterface Chunk {\n  color: TextProps['color']\n  prefix: string\n  lines: string[]\n}\nenum ConcurrentOutputState {\n  Running = 'running',\n  Stopped = 'stopped',\n}\nfunction addLeadingZero(number: number) {\n  if (number < 10) {\n    return `0${number}`\n  } else {\n    return number.toString()\n  }\n}\nfunction currentTime() {\n  const currentDateTime = new Date()\n  const hours = addLeadingZero(currentDateTime.getHours())\n  const minutes = addLeadingZero(currentDateTime.getMinutes())\n  const seconds = addLeadingZero(currentDateTime.getSeconds())\n  return `${hours}:${minutes}:${seconds}`\n}\n/**\n * Renders output from concurrent processes to the terminal.\n * Output will be divided in a three column layout\n * with the left column containing the timestamp,\n * the right column containing the output,\n * and the middle column containing the process prefix.\n * Every process will be rendered with a different color, up to 4 colors.\n *\n * For example running `shopify app dev`:\n *\n * ```shell\n * 2022-10-10 13:11:03 | backend    | npm\n * 2022-10-10 13:11:03 | backend    |  WARN ignoring workspace config at ...\n * 2022-10-10 13:11:03 | backend    |\n * 2022-10-10 13:11:03 | backend    |\n * 2022-10-10 13:11:03 | backend    | > shopify-app-template-node@0.1.0 dev\n * 2022-10-10 13:11:03 | backend    | > cross-env NODE_ENV=development nodemon backend/index.js --watch ./backend\n * 2022-10-10 13:11:03 | backend    |\n * 2022-10-10 13:11:03 | backend    |\n * 2022-10-10 13:11:03 | frontend   |\n * 2022-10-10 13:11:03 | frontend   | > starter-react-frontend-app@0.1.0 dev\n * 2022-10-10 13:11:03 | frontend   | > cross-env NODE_ENV=development node vite-server.js\n * 2022-10-10 13:11:03 | frontend   |\n * 2022-10-10 13:11:03 | frontend   |\n * 2022-10-10 13:11:03 | backend    |\n * 2022-10-10 13:11:03 | backend    | [nodemon] to restart at any time, enter `rs`\n * 2022-10-10 13:11:03 | backend    | [nodemon] watching path(s): backend/\n * 2022-10-10 13:11:03 | backend    | [nodemon] watching extensions: js,mjs,json\n * 2022-10-10 13:11:03 | backend    | [nodemon] starting `node backend/index.js`\n * 2022-10-10 13:11:03 | backend    |\n *\n * ```\n */\nconst ConcurrentOutput: FunctionComponent<ConcurrentOutputProps> = ({\n  processes,\n  abortController,\n  showTimestamps = true,\n  onInput,\n  onInputAsync,\n  footer,\n  keepRunningAfterProcessesResolve,\n}) => {\n  const [processOutput, setProcessOutput] = useState<Chunk[]>([])\n  const {exit: unmountInk} = useApp()\n  const prefixColumnSize = Math.max(...processes.map((process) => process.prefix.length))\n  const {isRawModeSupported} = useStdin()\n  const [state, setState] = useState<ConcurrentOutputState>(ConcurrentOutputState.Running)\n  const [footerContent, setFooterContent] = useState<Footer | undefined>(footer)\n  const concurrentColors: TextProps['color'][] = useMemo(() => ['yellow', 'cyan', 'magenta', 'green', 'blue'], [])\n  const lineColor = useCallback(\n    (index: number) => {\n      const colorIndex = index < concurrentColors.length ? index : index % concurrentColors.length\n      return concurrentColors[colorIndex]!\n    },\n    [concurrentColors],\n  )\n  const writableStream = useCallback(\n    (process: OutputProcess, index: number) => {\n      return new Writable({\n        write(chunk, _encoding, next) {\n          const lines = stripAnsi(chunk.toString('utf8').replace(/(\\n)$/, '')).split(/\\n/)\n          addOrUpdateConcurrentUIEventOutput({prefix: process.prefix, index, output: lines.join('\\n')}, {footer})\n          setProcessOutput((previousProcessOutput) => [\n            ...previousProcessOutput,\n            {\n              color: lineColor(index),\n              prefix: process.prefix,\n              lines,\n            },\n          ])\n          next()\n        },\n      })\n    },\n    [footer, lineColor],\n  )\n  const {isAborted} = useAbortSignal(abortController.signal)\n  const useShortcuts = isRawModeSupported && state === ConcurrentOutputState.Running && !isAborted\n\n  const updateShortcut = (prevShortcut: Shortcut, newShortcut: Shortcut) => {\n    if (!footerContent) return\n    const newFooterContent = {...footerContent}\n\n    newFooterContent.shortcuts.map((short) => {\n      if (short.key === prevShortcut.key) {\n        short.action = newShortcut.action\n        short.key = newShortcut.key\n        short.state = newShortcut.state\n      }\n    })\n    setFooterContent(newFooterContent)\n  }\n\n  const updateSubTitle = (subTitle: string) => {\n    if (!footerContent) return\n\n    setFooterContent({...footerContent, subTitle})\n  }\n\n  const runShortcutSyncs = () => {\n    footerContent?.shortcuts?.forEach((shortcut) => {\n      if (shortcut.syncer) shortcut.syncer({footer: footerContent, updateShortcut, updateSubTitle}, abortController)\n    })\n  }\n\n  useInput(\n    (input, key) => {\n      const exit = abortController ? () => abortController.abort() : () => treeKill('SIGINT')\n\n      handleCtrlC(input, key, exit)\n\n      const triggerOnInput = async () => {\n        if (onInput) {\n          onInput(input, key, exit)\n        } else if (onInputAsync) {\n          await onInputAsync(input, key, exit, {footer: footerContent, updateShortcut, updateSubTitle})\n        }\n      }\n\n      // eslint-disable-next-line @typescript-eslint/no-floating-promises\n      triggerOnInput()\n    },\n    {isActive: (typeof onInput !== 'undefined' || typeof onInputAsync !== 'undefined') && useShortcuts},\n  )\n\n  useEffect(() => {\n    runShortcutSyncs()\n  }, [])\n\n  useEffect(() => {\n    ;(() => {\n      return Promise.all(\n        processes.map(async (process, index) => {\n          const stdout = writableStream(process, index)\n          const stderr = writableStream(process, index)\n          await process.action(stdout, stderr, abortController.signal)\n        }),\n      )\n    })()\n      .then(() => {\n        if (!keepRunningAfterProcessesResolve) {\n          setState(ConcurrentOutputState.Stopped)\n          unmountInk()\n        }\n      })\n      .catch((error) => {\n        setState(ConcurrentOutputState.Stopped)\n        unmountInk(error)\n      })\n  }, [abortController, processes, writableStream, unmountInk, keepRunningAfterProcessesResolve])\n  const {lineVertical} = figures\n  return (\n    <>\n      <Static items={processOutput}>\n        {(chunk, index) => {\n          const prefixBuffer = ' '.repeat(prefixColumnSize - chunk.prefix.length)\n          return (\n            <Box flexDirection=\"column\" key={index}>\n              {chunk.lines.map((line, index) => (\n                <Box key={index} flexDirection=\"row\">\n                  <Text color={chunk.color}>\n                    {showTimestamps ? (\n                      <Text>\n                        {currentTime()} {lineVertical}{' '}\n                      </Text>\n                    ) : null}\n                    <Text>\n                      {chunk.prefix}\n                      {prefixBuffer} {lineVertical} {line}\n                    </Text>\n                  </Text>\n                </Box>\n              ))}\n            </Box>\n          )\n        }}\n      </Static>\n      {footerContent && !isAborted ? (\n        <Box\n          marginY={1}\n          paddingTop={1}\n          flexDirection=\"column\"\n          flexGrow={1}\n          borderStyle=\"single\"\n          borderBottom={false}\n          borderLeft={false}\n          borderRight={false}\n          borderTop\n        >\n          {useShortcuts ? (\n            <Box flexDirection=\"column\">\n              {footerContent.shortcuts.map((shortcut, index) => (\n                <Text key={index}>\n                  {figures.pointerSmall} Press <Text bold>{shortcut.key}</Text> {figures.lineVertical} {shortcut.action}\n                </Text>\n              ))}\n            </Box>\n          ) : null}\n          {footerContent.subTitle ? (\n            <Box marginTop={useShortcuts ? 1 : 0}>\n              <Text>{footerContent.subTitle}</Text>\n            </Box>\n          ) : null}\n        </Box>\n      ) : null}\n    </>\n  )\n}\nexport {ConcurrentOutput}\n"]}